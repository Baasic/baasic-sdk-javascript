!function(n,t){var e=n.MonoSoftware||(n.MonoSoftware={});!function(e){!function(e){function i(n,t){for(var e in t)n[e]=t[e];return n}function u(n,t,e){t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent?t.attachEvent("on"+n,e):t["on"+n]=e}function a(n,e,u){var a;return CustomEvent&&"function"==typeof CustomEvent?(a=new CustomEvent(e,u),void n.dispatchEvent(a)):t.createEvent?(a=t.createEvent("CustomEvent"),a.initEvent(e,!0,!0),u&&i(a,u),void(n.dispatchEvent?n.dispatchEvent(a):t.dispatchEvent(a))):(a=t.createEventObject(),a.eventType=e,u&&i(a,u),void n.fireEvent("on"+a.eventType,a))}function o(n,t){return new r(n,t)}function r(e,o){function r(n){if(n&&null!=n&&n.expire_time){var t=n.expire_time-(new Date).getTime();if(t>0)return setTimeout(function(){p(null,null)},t);p(null,null)}return null}function s(){return e}function c(){return k}function v(){return w.token}function f(n){p(w.user,n)}function g(){return w}function p(n,e){clearTimeout(L),void 0===e||null==e||void 0===n||null==n?(localStorage.removeItem(_),d(null,null)):(d(n,e),localStorage.setItem(_,JSON.stringify(w)),L=r(w.token)),a(t,"userChange",{user:w})}function d(n,t){var e={isAuthenticated:function(){return this.token&&null!=this.token}};null!=n&&(e.user=n),null!=t&&(e.token=t),w=e}function h(){return m.language?m.language:l?l:E()}function E(){return m.defaultLanguage}var m={useSSL:!1,defaultLanguage:"en",apiRootUrl:"api.baasic.com",apiVersion:"v1"};i(m,o);var S=m.useSSL?"https":"http",k=S+"://"+m.apiRootUrl+"/"+m.apiVersion+"/"+e+"/",_="baasic-user-info-"+e,w=JSON.parse(localStorage.getItem(_)),L=null;null!=w?(L=r(w.token),d(w.user,w.token)):d(null,null),u("storage",n,function(n){switch(n=n||event,n.key){case _:var t=n.newValue;if(void 0===t||null==t||""==t)d(null,null);else{var e=JSON.parse(t);d(e.user,e.token)}}}),this.get_apiKey=s,this.get_apiUrl=c,this.get_accessToken=v,this.update_accessToken=f,this.get_user=g,this.set_user=p,this.get_currentLanguage=h,this.get_defaultLanguage=E}var l=navigator.language||navigator.userLanguage;e.init=o}(e.Application||(e.Application={}));e.Application}(e.Baasic||(e.Baasic={}));e.Baasic}(window,document);