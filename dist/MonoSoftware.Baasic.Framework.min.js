!function(e,n){var t=e.MonoSoftware||(e.MonoSoftware={});!function(t){!function(t){function i(e,n){for(var t in n)e[t]=n[t];return e}function u(e,n,t){n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent?n.attachEvent("on"+e,t):n["on"+e]=t}function a(e,t,u){var a;return CustomEvent&&"function"==typeof CustomEvent?(a=new CustomEvent(t,u),void e.dispatchEvent(a)):n.createEvent?(a=n.createEvent("CustomEvent"),a.initEvent(t,!0,!0),u&&i(a,u),void(e.dispatchEvent?e.dispatchEvent(a):n.dispatchEvent(a))):(a=n.createEventObject(),a.eventType=t,u&&i(a,u),void e.fireEvent("on"+a.eventType,a))}function o(e,n){return new r(e,n)}function r(t,o){function r(e){if(e&&null!=e&&e.expireTime){var n=e.expireTime-(new Date).getTime();if(n>0)return setTimeout(function(){p(null,null)},n);p(null,null)}return null}function s(){return t}function c(){return T}function v(){return w.token}function f(e){p(w.user,e)}function g(){return w}function p(e,t){clearTimeout(_),void 0===t||null==t||void 0===e||null==e?(localStorage.removeItem(k),d(null,null)):(d(e,t),localStorage.setItem(k,JSON.stringify(w)),_=r(w.token)),a(n,"userChange",{user:w})}function d(e,n){var t={isAuthenticated:function(){return this.token&&null!=this.token}};null!=e&&(t.user=e),null!=n&&(!n.expireTime&&n.expires_in&&(n.expireTime=(new Date).getTime()+1e3*n.expires_in),t.token=n),w=t}function h(){return E.language?E.language:l?l:m()}function m(){return E.defaultLanguage}var E={useSSL:!1,defaultLanguage:"en",apiRootUrl:"api.baasic.com",apiVersion:"v1"};i(E,o);var S=E.useSSL?"https":"http",T=S+"://"+E.apiRootUrl+"/"+E.apiVersion+"/"+t+"/",k="baasic-user-info-"+t,w=JSON.parse(localStorage.getItem(k)),_=null;null!=w?(_=r(w.token),d(w.user,w.token)):d(null,null),u("storage",e,function(e){switch(e=e||event,e.key){case k:var n=e.newValue;if(void 0===n||null==n||""==n)d(null,null);else{var t=JSON.parse(n);d(t.user,t.token)}}}),this.get_apiKey=s,this.get_apiUrl=c,this.get_accessToken=v,this.update_accessToken=f,this.get_user=g,this.set_user=p,this.get_currentLanguage=h,this.get_defaultLanguage=m}var l=navigator.language||navigator.userLanguage;t.init=o}(t.Application||(t.Application={}));t.Application}(t.Baasic||(t.Baasic={}));t.Baasic}(window,document);