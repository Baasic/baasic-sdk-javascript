!function(e,n,t,i){function u(e,n){for(var t in n)e[t]=n[t];return e}var a=e.MonoSoftware||(e.MonoSoftware={}),r=t!==i?function(e,n,i){t(n).on(e,i)}:function(e,n,t){n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent?n.attachEvent("on"+e,t):n["on"+e]=t},o=t!==i?function(e,n,i){t(e).trigger(n,i)}:function(e,t,i){var a;return CustomEvent&&"function"==typeof CustomEvent?(a=new CustomEvent(t,i),void e.dispatchEvent(a)):n.createEvent?(a=n.createEvent("CustomEvent"),a.initEvent(t,!0,!0),i&&u(a,i),void(e.dispatchEvent?e.dispatchEvent(a):n.dispatchEvent(a))):(a=n.createEventObject(),a.eventType=t,i&&u(a,i),void e.fireEvent("on"+a.eventType,a))};!function(t){!function(t){function a(e,n){return new l(e,n)}function l(t,a){function l(e){if(e&&null!=e&&e.expireTime){var n=e.expireTime-(new Date).getTime();if(n>0)return setTimeout(function(){d(null,null)},n);d(null,null)}return null}function c(){return t}function g(){return S}function v(){return k.token}function f(e){d(k.user,e)}function p(){return k}function d(e,t){clearTimeout(L),t===i||null==t||e===i||null==e?(localStorage.removeItem(_),h(null,null)):(h(e,t),localStorage.setItem(_,JSON.stringify(k)),L=l(k.token)),o(n,"userChange",{user:k})}function h(e,n){var t={isAuthenticated:function(){return this.token&&null!=this.token}};null!=e&&(t.user=e),null!=n&&(n.expireTime||(n.expires_in?n.expireTime=(new Date).getTime()+1e3*n.expires_in:n.sliding_window&&(n.expireTime=(new Date).getTime()+1e3*n.sliding_window)),t.token=n),k=t}function m(){return w.language?w.language:s?s:E()}function E(){return w.defaultLanguage}var w={useSSL:!1,defaultLanguage:"en",apiRootUrl:"api.baasic.com",apiVersion:"v1"};u(w,a);var T=w.useSSL?"https":"http",S=T+"://"+w.apiRootUrl+"/"+w.apiVersion+"/"+t+"/",_="baasic-user-info-"+t,k=JSON.parse(localStorage.getItem(_)),L=null;null!=k?(L=l(k.token),h(k.user,k.token)):h(null,null),r("storage",e,function(e){switch(e=e||event,e.originalEvent&&(e=e.originalEvent),e.key){case _:var n=e.newValue;if(n===i||null==n||""==n)h(null,null);else{var t=JSON.parse(n);h(t.user,t.token)}}}),this.get_apiKey=c,this.get_apiUrl=g,this.get_accessToken=v,this.update_accessToken=f,this.get_user=p,this.set_user=d,this.get_currentLanguage=m,this.get_defaultLanguage=E}var s=navigator.language||navigator.userLanguage;t.init=a}(t.Application||(t.Application={}))}(a.Baasic||(a.Baasic={}))}(window,document,jQuery);