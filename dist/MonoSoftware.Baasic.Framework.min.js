!function(n){!function(n){!function(n){function t(n,t){for(var e in t)n[e]=t[e];return n}function e(n,t,e){t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent?t.attachEvent("on"+n,e):t["on"+n]=e}function u(n,e,u){var i;return CustomEvent&&"function"==typeof CustomEvent?(i=new CustomEvent(e,u),void n.dispatchEvent(i)):document.createEvent?(i=document.createEvent("CustomEvent"),i.initEvent(e,!0,!0),u&&t(i,u),void(n.dispatchEvent?n.dispatchEvent(i):document.dispatchEvent(i))):(i=document.createEventObject(),i.eventType=e,u&&t(i,u),void n.fireEvent("on"+i.eventType,i))}function i(n,t){return new a(n,t)}function a(n,i){function a(n){if(n&&null!=n&&n.expire_time){var t=n.expire_time-(new Date).getTime();if(t>0)return setTimeout(function(){f(null,null)},t);f(null,null)}return null}function r(){return n}function l(){return E}function c(){return k.token}function s(n){f(k.user,n)}function v(){return k}function f(n,t){clearTimeout(_),void 0===t||null==t||void 0===n||null==n?(localStorage.removeItem(S),g(null,null)):(g(n,t),localStorage.setItem(S,JSON.stringify(k)),_=a(k.token)),u(document,"userChange",{user:k})}function g(n,t){var e={isAuthenticated:function(){return this.token&&null!=this.token}};null!=n&&(e.user=n),null!=t&&(e.token=t),k=e}function p(){return h.language?h.language:o?o:d()}function d(){return h.defaultLanguage}var h={useSSL:!1,defaultLanguage:"en",apiRootUrl:"api.baasic.com",apiVersion:"v1"};t(h,i);var m=h.useSSL?"https":"http",E=m+"://"+h.apiRootUrl+"/"+h.apiVersion+"/"+n+"/",S="baasic-user-info-"+n,k=JSON.parse(localStorage.getItem(S)),_=null;null!=k?(_=a(k.token),g(k.user,k.token)):g(null,null),e("storage",window,function(n){switch(n=n||event,n.key){case S:var t=n.newValue;if(void 0===t||null==t||""==t)g(null,null);else{var e=JSON.parse(t);g(e.user,e.token)}}}),this.get_apiKey=r,this.get_apiUrl=l,this.get_accessToken=c,this.update_accessToken=s,this.get_user=v,this.set_user=f,this.get_currentLanguage=p,this.get_defaultLanguage=d}var o=navigator.language||navigator.userLanguage;n.init=i}(n.Application||(n.Application={}));n.Application}(n.Baasic||(n.Baasic={}));n.Baasic}(MonoSoftware=MonoSoftware||{});