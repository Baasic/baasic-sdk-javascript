!function(e){function t(t){return 0===t.indexOf(e.getApiUrl())}function n(){$.ajaxPrefilter(function(e){t(e.url)&&(s(e),e.crossDomain&&(e.xhrFields={withCredentials:!0}))})}function r(){var n=e.getApiUrl(),r=$('<div style="display:none"><iframe src="'+n+'proxy/jquery"></iframe></div>');r.find("iframe").on("load",function(){var e={},r=0,o=this;$(window).on("message",function(t){var n=t.originalEvent;if(n.source===o.contentWindow){var r=JSON.parse(n.data),s=e[r.requestId];s&&(delete e[r.requestId],s.completeCallback(r.status,r.statusText,{text:r.responseText},r.responseHeaders))}}),$.ajaxTransport("+*",function(i,a){return t(i.url)?(s(a),{requestId:r++,send:function(t,r){e[this.requestId]={completeCallback:r};var s=JSON.stringify({requestId:this.requestId,options:a});o.contentWindow.postMessage(s,n)},abort:function(){delete e[this.requestId]}}):void 0})}),$("body").append(r)}function s(t){var n=e.getAccessToken();if(null!==n){var r=t.headers||(t.headers={});r[o]=n.token_type+" "+n.access_token}}var o="Authorization";$.support.cors&&-1===navigator.userAgent.indexOf("MSIE")||!window.postMessage?n():r()}(MonoSoftware.Baasic.Application);