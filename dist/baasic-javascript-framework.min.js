!function(e,t,n,i){function a(e,t){for(var n in t)e[n]=t[n];return e}var r=e.MonoSoftware||(e.MonoSoftware={}),u=n!==i?function(e,t,i){n(t).on(e,i)}:function(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},o=n!==i?function(e,t,i){var r=a(n.Event(t),i);n(e).trigger(r)}:function(e,n,i){var r;return CustomEvent&&"function"==typeof CustomEvent?(r=a(new CustomEvent(n)),void e.dispatchEvent(r)):t.createEvent?(r=t.createEvent("CustomEvent"),r.initEvent(n,!0,!0),i&&a(r,i),void(e.dispatchEvent?e.dispatchEvent(r):t.dispatchEvent(r))):(r=t.createEventObject(),r.eventType=n,i&&a(r,i),void e.fireEvent("on"+r.eventType,r))};!function(n){!function(n){function r(e,t){return new s(e,t)}function c(e){o(t,"tokenExpired",{app:e})}function s(n,r){function s(){return n}function g(){return x}function v(){return O}function f(e){h(e),e===i||null==e?localStorage.removeItem(y):localStorage.setItem(y,JSON.stringify(O))}function p(){return k}function m(e){e===i||null==e?(localStorage.removeItem(L),E(null)):(E(e),localStorage.setItem(L,JSON.stringify(e)))}function d(e){if(e&&null!=e&&e.expireTime){var t=e.expireTime-(new Date).getTime();if(t>0)return setTimeout(function(){c(_)},t)}return null}function h(e){clearTimeout(I),e===i||null==e?(O=i,c(_)):(O=e,O.expireTime||(O.expires_in?O.expireTime=(new Date).getTime()+1e3*O.expires_in:O.sliding_window&&(O.expireTime=(new Date).getTime()+1e3*O.sliding_window)),I=d(O))}function E(e){var t={isAuthenticated:function(){return O!==i&&null!==O&&(O.expireTime===i||null===O.expireTime||O.expireTime-(new Date).getTime()>0)}};e&&(t.user=e),k=t}function S(){return w.language?w.language:l?l:T()}function T(){return w.defaultLanguage}var w={useSSL:!1,defaultLanguage:"en",apiRootUrl:"api.baasic.com",apiVersion:"v1"},_=this;a(w,r);var x=w.useSSL?"https":"http://"+w.apiRootUrl+"/"+w.apiVersion+"/"+n+"/",L="baasic-user-info-"+n,y="baasic-auth-token-"+n,O=JSON.parse(localStorage.getItem(y)),k=JSON.parse(localStorage.getItem(L)),I=null;O?(E(k),I=d(O)):E(null),u("storage",e,function(e){e=e||event,e.originalEvent&&(e=e.originalEvent);var n=e.newValue;switch(e.key){case L:if(n===i||null===n||""===n)E(null);else{var a=JSON.parse(n);E(a.user)}o(t,"userChange",{user:k,app:_});break;case y:h(""!==n?JSON.parse(n):null)}}),this.get_apiKey=s,this.get_apiUrl=g,this.get_accessToken=v,this.update_accessToken=f,this.get_user=p,this.set_user=m,this.get_currentLanguage=S,this.get_defaultLanguage=T}var l=navigator.language||navigator.userLanguage;n.init=r}(n.Application||(n.Application={}))}(r.Baasic||(r.Baasic={}))}(window,document,jQuery);