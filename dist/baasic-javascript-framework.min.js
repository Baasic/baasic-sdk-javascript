!function(e,t,n,i){function a(e,t){for(var n in t)e[n]=t[n];return e}var r=e.MonoSoftware||(e.MonoSoftware={}),o=n!==i?function(e,t,i){n(t).on(e,i)}:function(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},u=n!==i?function(e,t,i){var r=a(n.Event(t),i);n(e).trigger(r)}:function(e,n,i){var r;return CustomEvent&&"function"==typeof CustomEvent?(r=a(new CustomEvent(n)),void e.dispatchEvent(r)):t.createEvent?(r=t.createEvent("CustomEvent"),r.initEvent(n,!0,!0),i&&a(r,i),void(e.dispatchEvent?e.dispatchEvent(r):t.dispatchEvent(r))):(r=t.createEventObject(),r.eventType=n,i&&a(r,i),void e.fireEvent("on"+r.eventType,r))};!function(n){!function(n){function r(e,t){return new l(e,t)}function c(e){u(t,"userChange",{user:e})}function s(){u(t,"tokenExpired")}function l(t,n){function r(){return t}function u(){return w}function l(){return L}function v(e){d(e),e===i||null==e?localStorage.removeItem(x):localStorage.setItem(x,JSON.stringify(L))}function f(){return y}function p(e){e===i||null==e?(localStorage.removeItem(_),E(null)):(E(e),localStorage.setItem(_,JSON.stringify(e)))}function m(e){if(e&&null!=e&&e.expireTime){var t=e.expireTime-(new Date).getTime();if(t>0)return setTimeout(s,t)}return null}function d(e){clearTimeout(O),e===i||null==e?(L=i,s()):(L=e,L.expireTime||(L.expires_in?L.expireTime=(new Date).getTime()+1e3*L.expires_in:L.sliding_window&&(L.expireTime=(new Date).getTime()+1e3*L.sliding_window)),O=m(L))}function E(e){var t={isAuthenticated:function(){return L!==i&&null!==L&&(L.expireTime===i||null===L.expireTime||L.expireTime-(new Date).getTime()>0)}};e&&(t.user=e),y=t}function h(){return T.language?T.language:g?g:S()}function S(){return T.defaultLanguage}var T={useSSL:!1,defaultLanguage:"en",apiRootUrl:"api.baasic.com",apiVersion:"v1"};a(T,n);var w=T.useSSL?"https":"http://"+T.apiRootUrl+"/"+T.apiVersion+"/"+t+"/",_="baasic-user-info-"+t,x="baasic-auth-token-"+t,L=JSON.parse(localStorage.getItem(x)),y=JSON.parse(localStorage.getItem(_)),O=null;L?(E(y),O=m(L)):E(null),o("storage",e,function(e){e=e||event,e.originalEvent&&(e=e.originalEvent);var t=e.newValue;switch(e.key){case _:if(t===i||null===t||""===t)E(null);else{var n=JSON.parse(t);E(n.user)}c(y);break;case x:d(JSON.parse(t))}}),this.get_apiKey=r,this.get_apiUrl=u,this.get_accessToken=l,this.update_accessToken=v,this.get_user=f,this.set_user=p,this.get_currentLanguage=h,this.get_defaultLanguage=S}var g=navigator.language||navigator.userLanguage;n.init=r}(n.Application||(n.Application={}))}(r.Baasic||(r.Baasic={}))}(window,document,jQuery);